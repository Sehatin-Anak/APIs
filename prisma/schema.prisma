generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model user {
  id           Int      @id @default(autoincrement())
  username     String   @unique
  password     String
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt
  refreshToken String   @unique
}

model Child {
  id          Int      @id @default(autoincrement())
  tokenId     String   @unique
  name        String
  age         Int
  gender      String
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  ageCategory Int?
}

model Article {
  id        Int            @id @default(autoincrement())
  author    String
  year      Int
  title     String
  content   String         @db.VarChar(5000)
  createdAt DateTime       @default(now())
  updatedAt DateTime       @updatedAt
  bookmark  UserBookmark[]
}

model FoodRecom {
  id            Int            @id @default(autoincrement())
  name          String
  nutritionInfo String
  img           String
  description   String
  createdAt     DateTime       @default(now())
  updatedAt     DateTime       @updatedAt
  bookmark      UserBookmark[]
}

model UserBookmark {
  id          Int        @id @default(autoincrement())
  userToken   String
  foodRecomId Int?
  articleId   Int?
  foodRecom   FoodRecom? @relation(fields: [foodRecomId], references: [id])
  article     Article?   @relation(fields: [articleId], references: [id])
  createdAt   DateTime   @default(now())
  updatedAt   DateTime   @updatedAt

  @@unique([userToken, foodRecomId], name: "User_FoodRecom_Unique")
  @@unique([userToken, articleId], name: "User_Article_Unique")
}
